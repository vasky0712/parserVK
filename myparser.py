import time

import requests
import urllib.request

token = '049b4c8f049b4c8f049b4c8f7904f547520049b049b4c8f5949c534532c03fb17f53aaf'
v= 5.92
domain = 'alie.for.mens'
count = 1
offset = 0
all_posts = []
number = 0
jpg = '.jpg'

while offset<1:
    response = requests.get('https://api.vk.com/method/wall.get/',
                            params ={
                                'access_token': token,
                                'v':v,
                                'domain':domain,
                                'count':count,
                                'offset':offset
                            })
    data = response.json()['response']['items']
    all_posts.extend(data)
    offset +=count
    time.sleep(0.5)


while number<1:
    post = all_posts[number]
    urllib.request.urlretrieve(post['attachments'][0]['photo']['sizes'][0]['url'],   "photos/" +  str(number) + jpg)
    number+=1
#data = response.json()['response']['items'][0]['attachments'][1]['photo']['sizes'][0]['url']
print(all_posts)

'''
if post[{'attachments':['type':'photo']}]
[{'id': 43779, 'from_id': -143980140, 'owner_id': -143980140, 'date': 1574172004, 'marked_as_ads': 0, 'post_type': 'post', 'text': 'Bluetooth клавиатура Xiaomi Keyboard\n\nhttp://ali.pub/43f20q', 'attachments': [{'type': 'photo', 'photo': {'id': 457273754, 'album_id': -7, 'owner_id': -143980140, 'user_id': 100, 'sizes': [{'type': 'm', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15db/JX7JZ7Y9h1s.jpg', 'width': 130, 'height': 129}, {'type': 'o', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15dd/dWjPcn5piEU.jpg', 'width': 130, 'height': 129}, {'type': 'p', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15de/APuE7y0SISA.jpg', 'width': 200, 'height': 199}, {'type': 'q', 'url': 'https://sun3-11.userapi.com/c858332/v858332711/f15df/gcNwZENQHkY.jpg', 'width': 320, 'height': 319}, {'type': 'r', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e0/u6rfVFnY2PE.jpg', 'width': 444, 'height': 442}, {'type': 's', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15da/V-m3wMRlpJI.jpg', 'width': 75, 'height': 74}, {'type': 'x', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15dc/JGcTglLxaYA.jpg', 'width': 444, 'height': 442}], 'text': '', 'date': 1574073706, 'access_key': 'c384cd0aa4298b22b5'}}, {'type': 'photo', 'photo': {'id': 457273755, 'album_id': -7, 'owner_id': -143980140, 'user_id': 100, 'sizes': [{'type': 'm', 'url': 'https://sun3-11.userapi.com/c858332/v858332711/f15e2/jqVqdf6WuPw.jpg', 'width': 130, 'height': 130}, {'type': 'o', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15e5/CldKh43Ku6I.jpg', 'width': 130, 'height': 130}, {'type': 'p', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e6/rpbziR1S9OY.jpg', 'width': 200, 'height': 200}, {'type': 'q', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e7/rbY_2E0U8Oo.jpg', 'width': 320, 'height': 320}, {'type': 'r', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e8/YYb0E5E4aKc.jpg', 'width': 510, 'height': 510}, {'type': 's', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e1/Lwwub1wBmnE.jpg', 'width': 75, 'height': 75}, {'type': 'x', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15e3/nmkRONNNzVo.jpg', 'width': 604, 'height': 604}, {'type': 'y', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e4/eScq2BFbAU4.jpg', 'width': 640, 'height': 640}], 'text': '', 'date': 1574073706, 'access_key': 'e0fb8eea51123418f0'}}, {'type': 'link', 'link': {'url': 'http://ali.pub/43f20q', 'title': '2701.64руб. 27% СКИДКА|Оригинальная Двухрежимная клавиатура Xiaomi Miiiw с Bluetooth, 104 клавиш, 2,', 'description': 'Покупай умнее, живи веселее! Aliexpress.com', 'target': 'internal', 'photo': {'id': 457282524, 'album_id': -26, 'owner_id': 2000011089, 'sizes': [{'type': 'k', 'url': 'https://sun3-10.userapi.com/c855320/v855320711/16c075/F6M5d0ESLKk.jpg', 'width': 1000, 'height': 480}, {'type': 'l', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c074/MgLlv-FK_u4.jpg', 'width': 537, 'height': 240}, {'type': 'm', 'url': 'https://sun3-11.userapi.com/c855320/v855320711/16c071/-BCDdIzOheI.jpg', 'width': 130, 'height': 130}, {'type': 'p', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c073/K-icvsaXPts.jpg', 'width': 260, 'height': 260}, {'type': 's', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c070/oi_7RRvX8vo.jpg', 'width': 75, 'height': 75}, {'type': 'x', 'url': 'https://sun3-10.userapi.com/c855320/v855320711/16c072/8U-BJJZLI3M.jpg', 'width': 150, 'height': 150}], 'text': '', 'date': 1574073706}}}], 'post_source': {'type': 'vk'}, 'comments': {'count': 0, 'can_post': 0, 'groups_can_post': True}, 'likes': {'count': 2, 'user_likes': 0, 'can_like': 1, 'can_publish': 1}, 'reposts': {'count': 0, 'user_reposted': 0}, 'views': {'count': 440}}]
[{'id': 43779, 'from_id': -143980140, 'owner_id': -143980140, 'date': 1574172004, 'marked_as_ads': 0, 'post_type': 'post', 'text': 'Bluetooth клавиатура Xiaomi Keyboard\n\nhttp://ali.pub/43f20q', 'attachments': [{'type': 'photo', 'photo': {'id': 457273754, 'album_id': -7, 'owner_id': -143980140, 'user_id': 100, 'sizes': [{'type': 'm', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15db/JX7JZ7Y9h1s.jpg', 'width': 130, 'height': 129}, {'type': 'o', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15dd/dWjPcn5piEU.jpg', 'width': 130, 'height': 129}, {'type': 'p', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15de/APuE7y0SISA.jpg', 'width': 200, 'height': 199}, {'type': 'q', 'url': 'https://sun3-11.userapi.com/c858332/v858332711/f15df/gcNwZENQHkY.jpg', 'width': 320, 'height': 319}, {'type': 'r', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e0/u6rfVFnY2PE.jpg', 'width': 444, 'height': 442}, {'type': 's', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15da/V-m3wMRlpJI.jpg', 'width': 75, 'height': 74}, {'type': 'x', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15dc/JGcTglLxaYA.jpg', 'width': 444, 'height': 442}], 'text': '', 'date': 1574073706, 'access_key': 'c384cd0aa4298b22b5'}}, {'type': 'photo', 'photo': {'id': 457273755, 'album_id': -7, 'owner_id': -143980140, 'user_id': 100, 'sizes': [{'type': 'm', 'url': 'https://sun3-11.userapi.com/c858332/v858332711/f15e2/jqVqdf6WuPw.jpg', 'width': 130, 'height': 130}, {'type': 'o', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15e5/CldKh43Ku6I.jpg', 'width': 130, 'height': 130}, {'type': 'p', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e6/rpbziR1S9OY.jpg', 'width': 200, 'height': 200}, {'type': 'q', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e7/rbY_2E0U8Oo.jpg', 'width': 320, 'height': 320}, {'type': 'r', 'url': 'https://sun3-13.userapi.com/c858332/v858332711/f15e8/YYb0E5E4aKc.jpg', 'width': 510, 'height': 510}, {'type': 's', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e1/Lwwub1wBmnE.jpg', 'width': 75, 'height': 75}, {'type': 'x', 'url': 'https://sun3-12.userapi.com/c858332/v858332711/f15e3/nmkRONNNzVo.jpg', 'width': 604, 'height': 604}, {'type': 'y', 'url': 'https://sun3-10.userapi.com/c858332/v858332711/f15e4/eScq2BFbAU4.jpg', 'width': 640, 'height': 640}], 'text': '', 'date': 1574073706, 'access_key': 'e0fb8eea51123418f0'}}, {'type': 'link', 'link': {'url': 'http://ali.pub/43f20q', 'title': '2701.64руб. 27% СКИДКА|Оригинальная Двухрежимная клавиатура Xiaomi Miiiw с Bluetooth, 104 клавиш, 2,', 'description': 'Покупай умнее, живи веселее! Aliexpress.com', 'target': 'internal', 'photo': {'id': 457282524, 'album_id': -26, 'owner_id': 2000011089, 'sizes': [{'type': 'k', 'url': 'https://sun3-10.userapi.com/c855320/v855320711/16c075/F6M5d0ESLKk.jpg', 'width': 1000, 'height': 480}, {'type': 'l', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c074/MgLlv-FK_u4.jpg', 'width': 537, 'height': 240}, {'type': 'm', 'url': 'https://sun3-11.userapi.com/c855320/v855320711/16c071/-BCDdIzOheI.jpg', 'width': 130, 'height': 130}, {'type': 'p', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c073/K-icvsaXPts.jpg', 'width': 260, 'height': 260}, {'type': 's', 'url': 'https://sun3-13.userapi.com/c855320/v855320711/16c070/oi_7RRvX8vo.jpg', 'width': 75, 'height': 75}, {'type': 'x', 'url': 'https://sun3-10.userapi.com/c855320/v855320711/16c072/8U-BJJZLI3M.jpg', 'width': 150, 'height': 150}], 'text': '', 'date': 1574073706}}}], 'post_source': {'type': 'vk'}, 'comments': {'count': 0, 'can_post': 0, 'groups_can_post': True}, 'likes': {'count': 2, 'user_likes': 0, 'can_like': 1, 'can_publish': 1}, 'reposts': {'count': 0, 'user_reposted': value}, 'views': {value}}]
'''